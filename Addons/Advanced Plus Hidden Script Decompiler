-- advanced plus hidden script decompiler: decompiles all game scripts that attempted to hide themself with a combination of actors and self destruction
local debugging = true -- disable when using unless you are certain the game doesnt detect for warns with message out connection

local _warn = function(...)
    if debugging then
        warn(...)
    end
end

game:GetService("StarterGui"):SetCore("DevConsoleVisible", true)
if not decompile or not getscriptbytecode or not getnilinstances or not getactors or not run_on_actor then
    return _warn("unsupported exploit.")
end

-- normal hidden script decompiler source code
-- modify configuration values that are inside this string
local script = [[
local debugging = true -- disable when using unless you are certain the game doesnt detect for warns with message out connection

local _warn = function(...)
    if debugging then
        warn(...)
    end
end

local _decompile = function(scr) -- just a function for better checks + prevents scanning executor scripts
    if (scr:IsA("LocalScript") or scr:IsA("ModuleScript") or (scr:IsA("Script") and scr.RunContext == Enum.RunContext.Client)) and typeof(getscriptbytecode(scr)) == "string" and #getscriptbytecode(scr) ~= 0 then
        task.wait(1) -- remove this wait if your decompiler doesnt have a rate limit
        local _, src = pcall(function()
            return decompile(scr)
        end)

        if src then
            return src
        end

        return nil
    end
end

local main_folder = "HIDDEN_SCRIPTS_DECOMPILED"

local scripts = {
    ["LocalScript"] = main_folder .. "/LocalScript",
    ["ModuleScript"] = main_folder .. "/ModuleScript",
    ["Script"] = main_folder .. "/Script"
}

if not isfolder(main_folder) then
    makefolder(main_folder)
end

for _, script in pairs(scripts) do
    if not isfolder(script) then
        makefolder(script)
    end
end

-- keyword configuration to check for scripts with keywords
local use_search_keyword = false
local search_keyword = "getfenv"

for _, instance in ipairs(getnilinstances()) do
    if scripts[instance.ClassName] then
        _warn("Decompiling Script:", instance.Name)
        local src = _decompile(instance)
        if src and (not use_search_keyword or src:find(search_keyword)) then
            _warn("HIDDEN GAME SCRIPT FOUND:", instance.Name)
            writefile(scripts[instance.ClassName] .. "/" .. instance.Name .. ".lua", src)
        end
    end
end

_warn("Finished decompiling hidden game scripts.")
_warn("Hidden game scripts decompiled and saved to " .. main_folder)
]]

for _, actor in ipairs(getactors()) do
    _warn("ACTOR FOUND:", actor.Name)
    run_on_actor(actor, script)
end
